<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI OS - Home</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lobster&family=Nunito+Sans:wght@400;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/main.css">
</head>
<body>

        <!-- NEW: AI-Powered Notes Sidebar -->
        <div class="notes-sidebar">
            <div class="notes-header">
                <h2>Scratchpad</h2>
                <button class="close-notes-btn" aria-label="Close Notes">
                    <svg viewBox="0 0 24 24"><path fill="currentColor" d="M6.4 19L5 17.6l5.6-5.6L5 6.4L6.4 5l5.6 5.6L17.6 5L19 6.4L13.4 12l5.6 5.6l-1.4 1.4l-5.6-5.6L6.4 19Z"/></svg>
                </button>
            </div>
            <textarea id="notes-textarea" placeholder="Your thoughts..."></textarea>
        </div>

    <div class="welcome-overlay">
        <div class="welcome-content">
            <h1>Welcome</h1>
            <p>to the new AI Operating System!</p>
            <button id="enter-os-btn">Launch OS</button>
        </div>
    </div>

    <div class="app-store-window">
        <div class="app-store-content">
            <div class="app-store-header">
                <form class="search-form">
                    <svg class="search-icon" viewBox="0 0 24 24"><path fill="currentColor" d="M9.5 16q-2.725 0-4.612-1.888T3 9.5q0-2.725 1.888-4.612T9.5 3q2.725 0 4.612 1.888T16 9.5q0 1.45-.55 2.725T14.1 14.4l5.6 5.6q.275.275.275.7t-.275.7q-.275.275-.7.275t-.7-.275l-5.6-5.6q-1.225.8-2.6.8Z"/></svg>
                    <input type="search" id="app-search-input" placeholder="Search apps...">
                </form>
                <button class="close-app-store-btn" aria-label="Close App Store">
                    <svg viewBox="0 0 24 24"><path fill="currentColor" d="M6.4 19L5 17.6l5.6-5.6L5 6.4L6.4 5l5.6 5.6L17.6 5L19 6.4L13.4 12l5.6 5.6l-1.4 1.4l-5.6-5.6L6.4 19Z"/></svg>
                </button>
            </div>
            <div class="app-list"></div>
        </div>
    </div>

        <!-- AI TRIP PLANNER WINDOW -->
        <div class="planner-window">
            <div class="planner-content">
                <div class="planner-header">
                    <h3>AI Trip Planner</h3>
                    <button class="close-planner-btn" aria-label="Close Planner">
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M6.4 19L5 17.6l5.6-5.6L5 6.4L6.4 5l5.6 5.6L17.6 5L19 6.4L13.4 12l5.6 5.6l-1.4 1.4l-5.6-5.6L6.4 19Z"/></svg>
                    </button>
                </div>
    
                <div class="planner-body">
                    <!-- Initial state: shows a prompt to the user -->
                    <div class="planner-initial-state" id="planner-initial-view">
                        <svg class="planner-icon" viewBox="0 0 24 24"><path fill="currentColor" d="M22 13v7a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7v2H4v16h16v-7h2m-5-3.5a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3m-3.56-5.4l-.1.1L17 7.82l-5.6 5.6L10 14l.58-1.42l5.6-5.6l-3.62-3.62z"/></svg>
                        <h2>Plan Your Next Adventure</h2>
                        <p>Tell me where you want to go and for how long. I'll generate a custom itinerary for you.</p>
                    </div>
                    
                    <!-- Loading state: shows a spinner -->
                    <div class="planner-loading-state hidden" id="planner-loading-view">
                        <div class="planner-spinner"></div>
                        <p>Crafting your perfect trip...</p>
                    </div>
                    
                    <!-- Results state: where the plan will be rendered -->
                    <div class="planner-results-state hidden" id="planner-results-view">
                        <!-- The generated plan will be inserted here by JavaScript -->
                    </div>
                </div>
    
                <div class="planner-footer">
                    <form class="planner-form" id="planner-form">
                        <input type="text" id="planner-input" placeholder="e.g., A relaxing 5-day trip to Bali" autocomplete="off">
                        <button type="submit" aria-label="Generate Plan">
                            <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M3 20V4l19 8l-19 8Z"></path></svg>
                        </button>
                    </form>
                </div>
            </div>
        </div>

    <div class="chat-overlay hidden"></div>

    <main class="os-container">
        
        <div class="background-image"></div>

                <!-- APP WINDOW CONTAINER -->
                <div class="app-window-container" id="app-window-container">
                    <!-- App windows will be dynamically added here by JavaScript -->
                </div>

        <!-- MOVED & REPURPOSED: The dock now lives at the top -->
        <div class="app-dock-container">
            <div class="app-dock">
                <!-- Docked app icons will be dynamically inserted here -->
            </div>
        </div>

        <!-- REMOVED: The old top-center-menu with the "Browse apps" button is gone -->

        <div class="chat-view-container">
            <div class="ai-message-list-container">
                <div class="ai-message-list"></div>
            </div>
            <div class="ai-typing-indicator hidden">
                <div class="dot"></div><div class="dot"></div><div class="dot"></div>
            </div>
        </div>

        <!-- MUSIC PLAYER & VISUALIZER -->
        <canvas id="audio-visualizer"></canvas>
                <!-- FOCUS TIMER UI -->
                <div class="focus-timer-display" id="focus-timer">
                    <span id="timer-minutes">25</span>
                    <span>:</span>
                    <span id="timer-seconds">00</span>
                </div>
                <audio id="timer-notification" src="assets/sounds/notification.mp3" preload="auto"></audio>
        <audio id="music-player" crossorigin="anonymous"></audio>


        <footer class="bottom-bar">
            <!-- The dock container is no longer here -->
            <div class="user-group">
                <img src="https://i.pravatar.cc/150?img=1" alt="User 1" class="avatar">
                <img src="https://i.pravatar.cc/150?img=2" alt="User 2" class="avatar">
                <img src="https://i.pravatar.cc/150?img=3" alt="User 3" class="avatar">
            </div>

            <div class="center-console">
                <div class="main-user-avatar">
                    <img src="assets/icons/memo.png" alt="Main User Avatar">
                </div>
                <div class="ask-bar">
                    <span>Ask something</span>
                </div>
                <div class="compact-input-overlay">
                    <form class="compact-input-form">
                        <textarea id="compact-input" placeholder="Ask something..." rows="1"></textarea>
                        <!-- ADDED: Voice Mode Button -->
                        <button type="button" id="voice-mode-btn" class="voice-mode-btn" aria-label="Use Voice">
                            <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M12 14q-1.25 0-2.125-.875T9 11V5q0-1.25.875-2.125T12 2q1.25 0 2.125.875T15 5v6q0 1.25-.875 2.125T12 14Zm-1 7v-3.075q-2.6-.35-4.3-2.325T4 11H6q0 2.075 1.463 3.538T11 16v-1H8v-2h8v2h-3v1q2.075 0 3.538-1.463T18 11h2q0 2.225-1.7 4.2T13 17.925V21h-2Z"/></svg>
                        </button>
                        <button type="submit" aria-label="Send Message">
                            <svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M3 20V4l19 8l-19 8Z"></path></svg>
                        </button>
                    </form>
                </div>
            </div>

            <div class="right-user">
                <img src="https://i.pravatar.cc/150?img=5" alt="User 4" class="avatar">
            </div>
        </footer>

    </main>

    <script src="js/config.js" defer></script>
    <script src="js/os-core.js" defer></script>
    <script src="js/main.js" defer></script>

</body>
</html>